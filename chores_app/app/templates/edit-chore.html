{% extends "base.html" %}

{% block title %}Edit Chore{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header">
    <h2>Edit chore</h2>
    <p class="muted">â€¢ Created: {{ chore.created_at.strftime('%Y-%m-%d %I:%M %p') }}</p>
  </div>

  {% if error %}
    <p class="alert">{{ error }}</p>
  {% endif %}

  <form method="post" class="form">
    <label>
      <span>Title</span>
      <input type="text" name="title" value="{{ chore.title }}" required>
    </label>

    <label>
      <span>Day</span>
      <select name="day" required>
        {% for d in ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"] %}
          <option value="{{ d }}" {% if chore.day == d %}selected{% endif %}>{{ d }}</option>
        {% endfor %}
      </select>
    </label>

    <label class="checkbox-row">
      <input type="checkbox" name="done" {% if chore.done %}checked{% endif %}>
      <span>Done</span>
    </label>

    <label>
      <span>Notes</span>
      <textarea name="notes" rows="3">{{ chore.notes or "" }}</textarea>
    </label>

    <details class="history-box">
      <summary>History</summary>
      <textarea class="history-textarea" name="history" rows="8">{{ chore.history or "" }}</textarea>
      <p class="muted small">Tip: history is plain text; each line is one event.</p>
    </details>

    <div class="actions">
      <button type="submit" class="btn primary">Save</button>
      <a class="btn" href="{{ url_for('main.home') }}">Cancel</a>
    </div>
  </form>

  <hr>

  <form method="post"
        action="{{ url_for('main.delete_chore', chore_id=chore.id) }}"
        onsubmit="return confirm('Delete this chore?');">
    <button type="submit" class="btn danger">Delete chore</button>
  </form>
</div>
{% endblock %}
